import { ActiveSkill } from '@/types/skills'

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–∏–ø –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
export type { ActiveSkill }

// –ê–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞
export const ACTIVE_SKILLS = {
  // –õ—É—á–Ω–∏–∫
  'archer': [
    {
      id: 'archer_basic_shot',
      name: '–¢–æ—á–Ω—ã–π –í—ã—Å—Ç—Ä–µ–ª',
      description: '–ë–∞–∑–æ–≤—ã–π –≤—ã—Å—Ç—Ä–µ–ª –∏–∑ –ª—É–∫–∞ —Å —É–º–µ—Ä–µ–Ω–Ω—ã–º —É—Ä–æ–Ω–æ–º',
      level_requirement: 1,
      icon: 'üèπ',
      skill_type: 'active' as const,
      damage_type: 'physical' as const,
      base_damage: 80,
      mana_cost: 0,
      cooldown: 1,
      scaling_stat: 'agility' as const,
      scaling_ratio: 1.2,
      class_requirements: ['archer'],
      cost_to_learn: 0,
      is_learned: true,
      nodes: []
    },
    {
      id: 'archer_power_shot',
      name: '–ú–æ—â–Ω—ã–π –í—ã—Å—Ç—Ä–µ–ª',
      description: '–ó–∞—Ä—è–∂–µ–Ω–Ω—ã–π –≤—ã—Å—Ç—Ä–µ–ª —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º —É—Ä–æ–Ω–æ–º',
      level_requirement: 5,
      icon: 'üéØ',
      skill_type: 'active' as const,
      damage_type: 'physical' as const,
      base_damage: 150,
      mana_cost: 15,
      cooldown: 3,
      scaling_stat: 'agility' as const,
      scaling_ratio: 1.5,
      class_requirements: ['archer'],
      cost_to_learn: 100,
      is_learned: false,
      nodes: []
    },
    {
      id: 'archer_arrow_rain',
      name: '–î–æ–∂–¥—å –°—Ç—Ä–µ–ª',
      description: '–û–±—Å—Ç—Ä–µ–ª–∏–≤–∞–µ—Ç –æ–±–ª–∞—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ç—Ä–µ–ª–∞–º–∏',
      level_requirement: 10,
      icon: '‚òî',
      skill_type: 'aoe' as const,
      damage_type: 'physical' as const,
      base_damage: 120,
      mana_cost: 25,
      cooldown: 8,
      scaling_stat: 'agility' as const,
      scaling_ratio: 1.3,
      class_requirements: ['archer'],
      cost_to_learn: 500,
      is_learned: false,
      nodes: []
    },
    {
      id: 'archer_hawk_eye',
      name: '–ì–ª–∞–∑ –Ø—Å—Ç—Ä–µ–±–∞',
      description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω',
      level_requirement: 15,
      icon: 'üëÅÔ∏è',
      skill_type: 'buff' as const,
      damage_type: 'physical' as const,
      base_damage: 0,
      mana_cost: 30,
      cooldown: 15,
      scaling_stat: 'agility' as const,
      scaling_ratio: 0,
      class_requirements: ['archer'],
      cost_to_learn: 1000,
      is_learned: false,
      nodes: []
    },
    {
      id: 'archer_warding_barrier',
      name: '–ó–∞—â–∏—Ç–Ω—ã–π –ë–∞—Ä—å–µ—Ä',
      description: '–°–æ–∑–¥–∞–µ—Ç –±–∞—Ä—å–µ—Ä, –ø–æ–≥–ª–æ—â–∞—é—â–∏–π —É—Ä–æ–Ω',
      level_requirement: 20,
      icon: 'üõ°Ô∏è',
      skill_type: 'barrier' as const,
      damage_type: 'physical' as const,
      base_damage: 0,
      mana_cost: 40,
      cooldown: 20,
      scaling_stat: 'agility' as const,
      scaling_ratio: 0,
      class_requirements: ['archer'],
      cost_to_learn: 2000,
      is_learned: false,
      nodes: []
    },
    {
      id: 'archer_storm_volley',
      name: '–®—Ç–æ—Ä–º–æ–≤–æ–π –ó–∞–ª–ø',
      description: '–ú–∞—Å—Å–∏–≤–Ω–∞—è –∞—Ç–∞–∫–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –≤—ã—Å—Ç—Ä–µ–ª–∞–º–∏ –∏ –ª–µ—á–µ–Ω–∏–µ–º',
      level_requirement: 25,
      icon: '‚õàÔ∏è',
      skill_type: 'ultimate' as const,
      damage_type: 'physical' as const,
      base_damage: 300,
      mana_cost: 60,
      cooldown: 30,
      scaling_stat: 'agility' as const,
      scaling_ratio: 2.0,
      class_requirements: ['archer'],
      cost_to_learn: 5000,
      is_learned: false,
      nodes: []
    }
  ],

  // –ú–∞–≥
  'mage': [
    {
      id: 'mage_basic_bolt',
      name: '–ú–∞–≥–∏—á–µ—Å–∫–∞—è –°—Ç—Ä–µ–ª–∞',
      description: '–ë–∞–∑–æ–≤–∞—è –º–∞–≥–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞',
      level_requirement: 1,
      icon: 'üîÆ',
      skill_type: 'active' as const,
      damage_type: 'magical' as const,
      base_damage: 70,
      mana_cost: 5,
      cooldown: 1,
      scaling_stat: 'intelligence' as const,
      scaling_ratio: 1.3,
      class_requirements: ['mage'],
      cost_to_learn: 0,
      is_learned: true,
      nodes: []
    },
    {
      id: 'mage_fireball',
      name: '–û–≥–Ω–µ–Ω–Ω—ã–π –®–∞—Ä',
      description: '–ú–æ—â–Ω—ã–π –æ–≥–Ω–µ–Ω–Ω—ã–π —Å–Ω–∞—Ä—è–¥ —Å –ø–æ–¥–∂–æ–≥–æ–º',
      level_requirement: 5,
      icon: 'üî•',
      skill_type: 'active' as const,
      damage_type: 'magical' as const,
      base_damage: 140,
      mana_cost: 20,
      cooldown: 3,
      scaling_stat: 'spell_power' as const,
      scaling_ratio: 1.6,
      class_requirements: ['mage'],
      cost_to_learn: 100,
      is_learned: false,
      nodes: []
    },
    {
      id: 'mage_chain_lightning',
      name: '–¶–µ–ø–Ω–∞—è –ú–æ–ª–Ω–∏—è',
      description: '–ú–æ–ª–Ω–∏—è, –ø–µ—Ä–µ—Å–∫–∞–∫–∏–≤–∞—é—â–∞—è –º–µ–∂–¥—É –≤—Ä–∞–≥–∞–º–∏',
      level_requirement: 10,
      icon: '‚ö°',
      skill_type: 'aoe' as const,
      damage_type: 'magical' as const,
      base_damage: 110,
      mana_cost: 30,
      cooldown: 8,
      scaling_stat: 'spell_power' as const,
      scaling_ratio: 1.4,
      class_requirements: ['mage'],
      cost_to_learn: 500,
      is_learned: false,
      nodes: []
    },
    {
      id: 'mage_arcane_empowerment',
      name: '–ß–∞—Ä–æ–¥–µ–π—Å–∫–æ–µ –£—Å–∏–ª–µ–Ω–∏–µ',
      description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –º–∞–≥–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω –∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –º–∞–Ω—ã',
      level_requirement: 15,
      icon: '‚ú®',
      skill_type: 'buff' as const,
      damage_type: 'magical' as const,
      base_damage: 0,
      mana_cost: 35,
      cooldown: 15,
      scaling_stat: 'intelligence' as const,
      scaling_ratio: 0,
      class_requirements: ['mage'],
      cost_to_learn: 1000,
      is_learned: false,
      nodes: []
    },
    {
      id: 'mage_mana_shield',
      name: '–ú–∞–Ω–∞-–©–∏—Ç',
      description: '–°–æ–∑–¥–∞–µ—Ç —â–∏—Ç, –ø–æ–≥–ª–æ—â–∞—é—â–∏–π —É—Ä–æ–Ω –∑–∞ —Å—á–µ—Ç –º–∞–Ω—ã',
      level_requirement: 20,
      icon: 'üîµ',
      skill_type: 'barrier' as const,
      damage_type: 'magical' as const,
      base_damage: 0,
      mana_cost: 45,
      cooldown: 20,
      scaling_stat: 'intelligence' as const,
      scaling_ratio: 0,
      class_requirements: ['mage'],
      cost_to_learn: 2000,
      is_learned: false,
      nodes: []
    },
    {
      id: 'mage_meteor_shower',
      name: '–ú–µ—Ç–µ–æ—Ä–∏—Ç–Ω—ã–π –î–æ–∂–¥—å',
      description: '–ü—Ä–∏–∑—ã–≤–∞–µ—Ç –º–µ—Ç–µ–æ—Ä–∏—Ç—ã –Ω–∞ –æ–±–ª–∞—Å—Ç—å —Å –ª–µ—á–µ–Ω–∏–µ–º',
      level_requirement: 25,
      icon: '‚òÑÔ∏è',
      skill_type: 'ultimate' as const,
      damage_type: 'magical' as const,
      base_damage: 280,
      mana_cost: 70,
      cooldown: 30,
      scaling_stat: 'spell_power' as const,
      scaling_ratio: 2.2,
      class_requirements: ['mage'],
      cost_to_learn: 5000,
      is_learned: false,
      nodes: []
    }
  ],

  // –ë–µ—Ä—Å–µ—Ä–∫
  'berserker': [
    {
      id: 'berserker_basic_strike',
      name: '–ú–æ—â–Ω—ã–π –£–¥–∞—Ä',
      description: '–ë–∞–∑–æ–≤—ã–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä',
      level_requirement: 1,
      icon: 'ü™ì',
      skill_type: 'active' as const,
      damage_type: 'physical' as const,
      base_damage: 90,
      mana_cost: 0,
      cooldown: 1,
      scaling_stat: 'strength' as const,
      scaling_ratio: 1.4,
      class_requirements: ['berserker'],
      cost_to_learn: 0,
      is_learned: true,
      nodes: []
    },
    {
      id: 'berserker_devastating_blow',
      name: '–û–ø—É—Å—Ç–æ—à–∞—é—â–∏–π –£–¥–∞—Ä',
      description: '–°–æ–∫—Ä—É—à–∏—Ç–µ–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞ —Å –≤—ã—Å–æ–∫–∏–º —É—Ä–æ–Ω–æ–º',
      level_requirement: 5,
      icon: 'üí•',
      skill_type: 'active' as const,
      damage_type: 'physical' as const,
      base_damage: 180,
      mana_cost: 15,
      cooldown: 4,
      scaling_stat: 'strength' as const,
      scaling_ratio: 1.8,
      class_requirements: ['berserker'],
      cost_to_learn: 100,
      is_learned: false,
      nodes: []
    },
    {
      id: 'berserker_whirlwind',
      name: '–°–º–µ—Ä—á',
      description: '–í—Ä–∞—â–∞—Ç–µ–ª—å–Ω–∞—è –∞—Ç–∞–∫–∞, –ø–æ—Ä–∞–∂–∞—é—â–∞—è –≤—Å–µ—Ö –≤–æ–∫—Ä—É–≥',
      level_requirement: 10,
      icon: 'üå™Ô∏è',
      skill_type: 'aoe' as const,
      damage_type: 'physical' as const,
      base_damage: 130,
      mana_cost: 25,
      cooldown: 8,
      scaling_stat: 'strength' as const,
      scaling_ratio: 1.5,
      class_requirements: ['berserker'],
      cost_to_learn: 500,
      is_learned: false,
      nodes: []
    },
    {
      id: 'berserker_bloodlust',
      name: '–ö—Ä–æ–≤–æ–∂–∞–¥–Ω–æ—Å—Ç—å',
      description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –∞—Ç–∞–∫–∏',
      level_requirement: 15,
      icon: 'ü©∏',
      skill_type: 'buff' as const,
      damage_type: 'physical' as const,
      base_damage: 0,
      mana_cost: 30,
      cooldown: 15,
      scaling_stat: 'strength' as const,
      scaling_ratio: 0,
      class_requirements: ['berserker'],
      cost_to_learn: 1000,
      is_learned: false,
      nodes: []
    },
    {
      id: 'berserker_iron_skin',
      name: '–ñ–µ–ª–µ–∑–Ω–∞—è –ö–æ–∂–∞',
      description: '–í—Ä–µ–º–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –±—Ä–æ–Ω—é –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ',
      level_requirement: 20,
      icon: 'üõ°Ô∏è',
      skill_type: 'barrier' as const,
      damage_type: 'physical' as const,
      base_damage: 0,
      mana_cost: 40,
      cooldown: 20,
      scaling_stat: 'endurance' as const,
      scaling_ratio: 0,
      class_requirements: ['berserker'],
      cost_to_learn: 2000,
      is_learned: false,
      nodes: []
    },
    {
      id: 'berserker_apocalypse',
      name: '–ê–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å',
      description: '–ú–∞—Å—Å–∏–≤–Ω–∞—è –∞—Ç–∞–∫–∞ —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∑–¥–æ—Ä–æ–≤—å—è',
      level_requirement: 25,
      icon: 'üíÄ',
      skill_type: 'ultimate' as const,
      damage_type: 'physical' as const,
      base_damage: 350,
      mana_cost: 60,
      cooldown: 30,
      scaling_stat: 'strength' as const,
      scaling_ratio: 2.5,
      class_requirements: ['berserker'],
      cost_to_learn: 5000,
      is_learned: false,
      nodes: []
    }
  ],

  // –ê—Å—Å–∞—Å–∏–Ω
  'assassin': [
    {
      id: 'assassin_basic_stab',
      name: '–ë—ã—Å—Ç—Ä—ã–π –£–∫–æ–ª',
      description: '–ë—ã—Å—Ç—Ä–∞—è –∞—Ç–∞–∫–∞ —Å –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é',
      level_requirement: 1,
      icon: 'üó°Ô∏è',
      skill_type: 'active' as const,
      damage_type: 'physical' as const,
      base_damage: 75,
      mana_cost: 0,
      cooldown: 0.8,
      scaling_stat: 'agility' as const,
      scaling_ratio: 1.3,
      class_requirements: ['assassin'],
      cost_to_learn: 0,
      is_learned: true,
      nodes: []
    },
    {
      id: 'assassin_backstab',
      name: '–£–¥–∞—Ä –≤ –°–ø–∏–Ω—É',
      description: '–°–∫—Ä—ã—Ç–∞—è –∞—Ç–∞–∫–∞ —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º —É—Ä–æ–Ω–æ–º',
      level_requirement: 5,
      icon: 'üó°Ô∏è',
      skill_type: 'active' as const,
      damage_type: 'physical' as const,
      base_damage: 160,
      mana_cost: 20,
      cooldown: 4,
      scaling_stat: 'stealth' as const,
      scaling_ratio: 1.7,
      class_requirements: ['assassin'],
      cost_to_learn: 100,
      is_learned: false,
      nodes: []
    },
    {
      id: 'assassin_poison_dart',
      name: '–Ø–¥–æ–≤–∏—Ç–∞—è –°—Ç—Ä–µ–ª–∞',
      description: '–ê—Ç–∞–∫–∞ —Å —è–¥–æ–º, –ø–æ—Ä–∞–∂–∞—é—â–∞—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—Ä–∞–≥–æ–≤',
      level_requirement: 10,
      icon: 'üü¢',
      skill_type: 'aoe' as const,
      damage_type: 'magical' as const,
      base_damage: 100,
      mana_cost: 25,
      cooldown: 8,
      scaling_stat: 'stealth' as const,
      scaling_ratio: 1.4,
      class_requirements: ['assassin'],
      cost_to_learn: 500,
      is_learned: false,
      nodes: []
    },
    {
      id: 'assassin_shadow_cloak',
      name: '–¢–µ–Ω–µ–≤–æ–π –ü–ª–∞—â',
      description: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω',
      level_requirement: 15,
      icon: 'üë§',
      skill_type: 'buff' as const,
      damage_type: 'physical' as const,
      base_damage: 0,
      mana_cost: 30,
      cooldown: 15,
      scaling_stat: 'stealth' as const,
      scaling_ratio: 0,
      class_requirements: ['assassin'],
      cost_to_learn: 1000,
      is_learned: false,
      nodes: []
    },
    {
      id: 'assassin_smoke_bomb',
      name: '–î—ã–º–æ–≤–∞—è –ë–æ–º–±–∞',
      description: '–°–æ–∑–¥–∞–µ—Ç –¥—ã–º–æ–≤—É—é –∑–∞–≤–µ—Å—É –¥–ª—è –∑–∞—â–∏—Ç—ã',
      level_requirement: 20,
      icon: 'üí®',
      skill_type: 'barrier' as const,
      damage_type: 'physical' as const,
      base_damage: 0,
      mana_cost: 40,
      cooldown: 20,
      scaling_stat: 'stealth' as const,
      scaling_ratio: 0,
      class_requirements: ['assassin'],
      cost_to_learn: 2000,
      is_learned: false,
      nodes: []
    },
    {
      id: 'assassin_death_mark',
      name: '–ú–µ—Ç–∫–∞ –°–º–µ—Ä—Ç–∏',
      description: '–ú–∞—Å—Å–∏–≤–Ω–∞—è –∞—Ç–∞–∫–∞ —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø—Ä–∏ —É–±–∏–π—Å—Ç–≤–µ',
      level_requirement: 25,
      icon: 'üíÄ',
      skill_type: 'ultimate' as const,
      damage_type: 'physical' as const,
      base_damage: 320,
      mana_cost: 60,
      cooldown: 30,
      scaling_stat: 'stealth' as const,
      scaling_ratio: 2.3,
      class_requirements: ['assassin'],
      cost_to_learn: 5000,
      is_learned: false,
      nodes: []
    }
  ]
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤ –∫–ª–∞—Å—Å–∞
export function getClassSkills(className: string): ActiveSkill[] {
  const classKey = className.toLowerCase() as keyof typeof ACTIVE_SKILLS
  return ACTIVE_SKILLS[classKey] || []
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é
export function getAvailableSkills(className: string, level: number, learnedSkills: string[] = []): ActiveSkill[] {
  const skills = getClassSkills(className)
  return skills.map(skill => ({
    ...skill,
    // –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Å–∫–∏–ª (—É—Ä–æ–≤–µ–Ω—å 1) –∏–∑—É—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫–∏–ª–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫—É–ø–ª–µ–Ω—ã
    is_learned: skill.level_requirement === 1 || learnedSkills.includes(skill.id)
  }))
}
